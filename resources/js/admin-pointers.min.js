AWPCP.define("awpcp/pointers-manager",["jquery"],function(a){var b=function(){};return a.extend(b.prototype,{createPointers:function(b){var c=this;a.each(b,function(a,b){c.createPointer(b)})},createPointer:function(b){var c=this;b.element=a("#wpadminbar").pointer({pointerClass:"wp-pointer awpcp-pointer",pointerWidth:470,position:b.position,content:b.content,buttons:c.createPointerButtons(b)}).pointer("open")},createPointerButtons:function(b){var c=this;return function(){var d=a("<div />");return a.each(b.buttons,function(e,f){var g=a("<a>");g.text(f.label),g.addClass(f.elementClass),g.css(f.elementCSS),g.on("click",function(a){c.onButtonClicked(a,f,b)}),d.append(g)}),d}},onButtonClicked:function(b,c,d){b.preventDefault();var e;e=c.data&&c.data.slice?c.data.slice():[],e.splice(0,0,c.event,d),a.publish("/pointer/"+c.event,e)}}),new b}),AWPCP.run("awpcp/admin-pointers",["jquery","awpcp/pointers-manager","awpcp/settings"],function(a,b,c){a(function(){var a=c.get("pointers");a&&b.createPointers(a)})}),AWPCP.run("awpcp/drip-autoresponder",["jquery","awpcp/pointers-manager","awpcp/settings"],function(a,b,c){function d(d,e,f,g){var h=f.element.pointer("widget"),i=h.find(".awpcp-spinner").show(),j=h.find(".awpcp-message").empty().addClass("is-hidden");a.post(c.get("ajaxurl"),{action:e,email:h.find('[name="awpcp-user-email"]').val(),nonce:g},function(c){"ok"===c.status?(f.element.pointer("destroy"),b.createPointer(c.pointer)):"error"===c.status&&"undefined"!=typeof c.error&&c.error.length>0?(j.removeClass("is-hidden").append(a("<p>"+c.error+"</p>")),i.hide()):f.element.pointer("destroy")})}function e(b,d,e,f){a.post(c.get("ajaxurl"),{action:d,nonce:f}),e.element.pointer("destroy")}function f(a,b,c){c.element.pointer("destroy")}a.subscribe("/pointer/awpcp-autoresponder-user-subscribed",d),a.subscribe("/pointer/awpcp-autoresponder-dismissed",e),a.subscribe("/pointer/awpcp-autoresponder-confirmation-dismissed",f)});